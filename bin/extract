#!/bin/zsh
# Extracts given files in directories with matching names

for full in $@; do
    echo "Extracting $full"
    ext=${full##*.}
    filename=$(basename $full .$ext)
    del=false
    if [[ "$filename" == *.tar || "$ext" == 'tgz' ]]; then
         7z x $full
         if [[ "$ext" == 'tgz' ]]; then
             full="$filename.tar"
         else
             full=$filename
             filename=$(basename $filename .tar)
         fi
         del=true
    fi
    7z x $full -o$filename
    if [[ $del == true ]]; then
        rm $full;
    fi
done
